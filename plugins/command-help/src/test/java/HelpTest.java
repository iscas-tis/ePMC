/****************************************************************************

    ePMC - an extensible probabilistic model checker
    Copyright (C) 2017

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

 *****************************************************************************/

import org.junit.BeforeClass;
import org.junit.Test;

import epmc.command.UsagePrinterJANI;
import epmc.jani.interaction.commandline.CommandLineOptions;
import epmc.jani.interaction.options.JANIInteractionIO;
import epmc.jani.interaction.options.OptionsJANIInteraction;
import epmc.jani.interaction.options.OptionsJANIInteractionJDBC;
import epmc.main.options.UtilOptionsEPMC;
import epmc.modelchecker.options.OptionsModelChecker;
import epmc.options.Options;
import epmc.plugin.OptionsPlugin;
import epmc.util.UtilJSON;

import static epmc.modelchecker.TestHelper.*;

import javax.json.Json;
import javax.json.JsonArray;
import javax.json.JsonObject;
import javax.json.JsonObjectBuilder;
import javax.json.JsonStructure;

public final class HelpTest {
    /** Location of plugin directory in file system. */
    private final static String PLUGIN_DIR = System.getProperty("user.dir") + "/target/classes/";

    /**
     * Set up the tests.
     */
    @BeforeClass
    public static void initialise() {
        prepare();
    }

    /**
     * Prepare options including loading JANI plugin.
     * 
     * @return options usable for JANI model analysis
     */
    private final static Options prepareJANIInteractionOptions() {
        Options options = UtilOptionsEPMC.newOptions();
        options.set(OptionsPlugin.PLUGIN, PLUGIN_DIR);
        prepareOptions(options);
        options.set(OptionsJANIInteractionJDBC.JANI_INTERACTION_JDBC_DRIVER_JAR, "lib/sqlite-jdbc-3.8.11.2.jar");
        options.set(OptionsJANIInteractionJDBC.JANI_INTERACTION_JDBC_DRIVER_CLASS, "org.sqlite.JDBC");
        options.set(OptionsJANIInteractionJDBC.JANI_INTERACTION_JDBC_URL, "jdbc:sqlite:test.db");
        options.set(OptionsJANIInteractionJDBC.JANI_INTERACTION_JDBC_USERNAME, "asdf");
        options.set(OptionsJANIInteractionJDBC.JANI_INTERACTION_JDBC_PASSWORD, "password");
        return options;
    }

    @Test
    public void getOptionsTest() {
        String string = "{\"authenticate\":\"capabilities\",\"jani-version\":1,\"extensions\":[],\"metadata\":{\"name\":\"EPMC\",\"version\":{\"major\":0,\"minor\":0,\"revision\":0}},\"x-precise-categories\":[{\"id\":\"dd-category\",\"name\":\"Decision diagrams\"},{\"id\":\"constraintsolver-category\",\"name\":\"Constraint solving\"},{\"id\":\"graphsolver-category\",\"name\":\"Graph solving\"},{\"id\":\"automaton-category\",\"name\":\"Automaton\"},{\"id\":\"jani-model-category\",\"name\":\"JANI model\"},{\"id\":\"dd-cudd-category\",\"name\":\"CUDD\",\"parent\":\"dd-category\"},{\"id\":\"dd-cudd-mtbdd-category\",\"name\":\"CUDD MTBDD\",\"parent\":\"dd-category\"},{\"id\":\"ltl-lazy-category\",\"name\":\"Lazy LTL solver\"},{\"id\":\"graphsolver-iterative-category\",\"name\":\"Iterative graph solver\",\"parent\":\"graphsolver-category\"},{\"id\":\"jani-interaction-category\",\"name\":\"JANI interaction\"},{\"id\":\"jani-interaction-jdbc-category\",\"name\":\"JANI interaction JDBC\",\"parent\":\"jani-interaction-category\"}],\"parameters\":[{\"id\":\"server-name\",\"name\":\"Name under which the server is registered for RMI\",\"is-global\":false,\"type\":\"string\",\"x-precise-type\":\"<string>\",\"default-value\":\"EPMC\"},{\"id\":\"translate-messages\",\"name\":\"Translate messages to human languages\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true},{\"id\":\"time-stamps\",\"name\":\"Specify type of time stamp to add before each output line\",\"is-global\":true,\"type\":[\"seconds-absolute\",\"seconds-started\",\"milliseconds-absolute\",\"milliseconds-started\",\"java-date\",\"none\"],\"x-precise-type\":\"<seconds-absolute|seconds-started|milliseconds-absolute|milliseconds-started|java-date|none>\",\"default-value\":\"none\"},{\"id\":\"property-solver\",\"name\":\"Property solvers to use for model checking\",\"is-global\":true,\"type\":\"string\",\"x-precise-type\":\"<propositional-explicit|propositional-dd|operator-explicit|operator-dd|reward-explicit|reward-explicit-instantaneous|filter-dd|filter-explicit|pctl-explicit|pctl-explicit-next|explicit-steady-state|pctl-dd|ltl-dd|ltl-explicit>\",\"default-value\":\"propositional-explicit,propositional-dd,operator-explicit,operator-dd,reward-explicit,reward-explicit-instantaneous,filter-dd,filter-explicit,pctl-explicit,pctl-explicit-next,explicit-steady-state,pctl-dd,ltl-dd,ltl-explicit\"},{\"id\":\"compute-scheduler\",\"name\":\"Compute scheduler if possible\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":false},{\"id\":\"plugin\",\"name\":\"Load plugin(s) (dirs or JARs)\",\"is-global\":false,\"type\":\"string\",\"x-precise-type\":\"<filename>(,<filename>)*\",\"default-value\":\"\"},{\"id\":\"plugin-list-file\",\"name\":\"File containing list of plugins (dirs or JARs)\",\"is-global\":false,\"type\":\"string\",\"x-precise-type\":\"<string>\",\"default-value\":null},{\"id\":\"value-floating-point-output-format\",\"name\":\"Format string for printing out floating point numbers\",\"is-global\":true,\"type\":\"string\",\"x-precise-type\":\"<string>\",\"default-value\":\"%.7f\"},{\"id\":\"value-floating-point-output-native\",\"name\":\"Use the native JAVA format string for printing out floating point numbers\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":false},{\"id\":\"dd-binary-engine\",\"name\":\"DD engine to use for binary decision diagrams\",\"is-global\":true,\"type\":[\"cudd\"],\"x-precise-type\":\"<cudd>\",\"default-value\":\"cudd\",\"category\":\"Decision diagrams\",\"x-precise-category\":\"dd-category\"},{\"id\":\"dd-multi-engine\",\"name\":\"DD engine to use for multi-terminal decision diagrams\",\"is-global\":true,\"type\":[\"cudd-mtbdd\"],\"x-precise-type\":\"<cudd-mtbdd>\",\"default-value\":\"cudd-mtbdd\",\"category\":\"Decision diagrams\",\"x-precise-category\":\"dd-category\"},{\"id\":\"dd-debug\",\"name\":\"Debug decision diagram package (slow)\",\"is-global\":false,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":false,\"category\":\"Decision diagrams\",\"x-precise-category\":\"dd-category\"},{\"id\":\"dd-and-exist\",\"name\":\"Use specialised and-exist operator (if supported)\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":false,\"category\":\"Decision diagrams\",\"x-precise-category\":\"dd-category\"},{\"id\":\"dd-leak-check\",\"name\":\"Check whether all DDs freed before closing DD manager (not necessary in case of exceptions)\",\"is-global\":false,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":false,\"category\":\"Decision diagrams\",\"x-precise-category\":\"dd-category\"},{\"id\":\"dd-expression-vector\",\"name\":\"Use bit vectors for expression to DD translation\",\"is-global\":false,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true},{\"id\":\"dd-expression-cache\",\"name\":\"Cache expressions translated to DDs\",\"is-global\":false,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true},{\"id\":\"state-storage\",\"name\":\"Data structure to store states in explicit engine\",\"is-global\":true,\"type\":[\"smallest\",\"long-array\",\"long\",\"int\"],\"x-precise-type\":\"<smallest|long-array|long|int>\",\"default-value\":\"smallest\"},{\"id\":\"wrapper-graph-successors-size\",\"name\":\"Integer type used to store number of successors in wrapper graph\",\"is-global\":true,\"type\":[\"smallest\",\"int\",\"short\",\"byte\"],\"x-precise-type\":\"<smallest|int|short|byte>\",\"default-value\":\"smallest\"},{\"id\":\"dd-scc-algorithm\",\"name\":\"Algorithm to use for decision-diagram-based strongly connected component decomposition\",\"is-global\":true,\"type\":[\"chatterjee\",\"bloem\"],\"x-precise-type\":\"<chatterjee|bloem>\",\"default-value\":\"bloem\"},{\"id\":\"constraintsolver-solver\",\"name\":\"Constraint solvers to use for model checking\",\"is-global\":true,\"type\":\"string\",\"x-precise-type\":\"<lp-solve>\",\"default-value\":\"lp-solve\",\"category\":\"Constraint solving\",\"x-precise-category\":\"constraintsolver-category\"},{\"id\":\"graphsolver-preprocessor-explicit\",\"name\":\"Graph preprocessors to use\",\"is-global\":true,\"type\":\"string\",\"x-precise-type\":\"<mc-mdp-one>\",\"default-value\":\"mc-mdp-one\",\"category\":\"Graph solving\",\"x-precise-category\":\"graphsolver-category\"},{\"id\":\"graphsolver-solver\",\"name\":\"Graph solvers to use for model checking\",\"is-global\":true,\"type\":\"string\",\"x-precise-type\":\"<graph-solver-iterative-bounded-native|graph-solver-iterative-bounded-reachability-native|graph-solver-iterative-unbounded-reachability-native|graph-solver-iterative-unbounded-cumulative-native|graph-solver-iterative-bounded-cumulative-discounted-native|graph-solver-iterative-bounded-cumulative-native|graph-solver-iterative-bounded-java|graph-solver-iterative-bounded-reachability-java|graph-solver-iterative-unbounded-reachability-java|graph-solver-iterative-unbounded-cumulative-java|graph-solver-iterative-bounded-cumulative-discounted-java|graph-solver-iterative-bounded-cumulative-java>\",\"default-value\":\"graph-solver-iterative-bounded-native,graph-solver-iterative-bounded-reachability-native,graph-solver-iterative-unbounded-reachability-native,graph-solver-iterative-unbounded-cumulative-native,graph-solver-iterative-bounded-cumulative-discounted-native,graph-solver-iterative-bounded-cumulative-native,graph-solver-iterative-bounded-java,graph-solver-iterative-bounded-reachability-java,graph-solver-iterative-unbounded-reachability-java,graph-solver-iterative-unbounded-cumulative-java,graph-solver-iterative-bounded-cumulative-discounted-java,graph-solver-iterative-bounded-cumulative-java\",\"category\":\"Graph solving\",\"x-precise-category\":\"graphsolver-category\"},{\"id\":\"graphsolver-lumper-explicit\",\"name\":\"Lumper to use for reducing size of models for explicit engine\",\"is-global\":true,\"type\":\"string\",\"x-precise-type\":\"<lumper-explicit-signature-strong|lumper-explicit-signature-weak-ctmc>\",\"default-value\":\"lumper-explicit-signature-strong,lumper-explicit-signature-weak-ctmc\",\"category\":\"Graph solving\",\"x-precise-category\":\"graphsolver-category\"},{\"id\":\"graphsolver-lump-before-graph-solving\",\"name\":\"Lump the cross product of the model and the automaton corresponding to the property before computing reachability probability\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":false,\"category\":\"Graph solving\",\"x-precise-category\":\"graphsolver-category\"},{\"id\":\"graphsolver-lumper-dd\",\"name\":\"Lumper to use for reducing size of models for DD engine\",\"is-global\":true,\"type\":\"string\",\"x-precise-type\":\"<>\",\"default-value\":\"\",\"category\":\"Graph solving\",\"x-precise-category\":\"graphsolver-category\"},{\"id\":\"graphsolver-update-delay\",\"name\":\"Delay (in ms) to show updates in graph solvers\",\"is-global\":true,\"type\":\"string\",\"x-precise-type\":\"<long>\",\"default-value\":\"1000\",\"category\":\"Graph solving\",\"x-precise-category\":\"graphsolver-category\"},{\"id\":\"automaton-dd-max-states\",\"name\":\"Maximal number of automaton states to support in DD-based analysis\",\"is-global\":true,\"type\":\"int\",\"x-precise-type\":\"<integer>\",\"default-value\":1000,\"category\":\"Automaton\",\"x-precise-category\":\"automaton-category\"},{\"id\":\"automaton-builder\",\"name\":\"Method to construct BÃ¼chi automaton\",\"is-global\":false,\"type\":[\"spot\"],\"x-precise-type\":\"<spot>\",\"default-value\":\"spot\",\"category\":\"Automaton\",\"x-precise-category\":\"automaton-category\"},{\"id\":\"automaton-spot-ltl2tgba-cmd\",\"name\":\"Command for Spot's ltl2tgba tool\",\"is-global\":false,\"type\":\"string\",\"x-precise-type\":\"<string>\",\"default-value\":\"ltl2tgba\",\"category\":\"Automaton\",\"x-precise-category\":\"automaton-category\"},{\"id\":\"automaton-subsume-aps\",\"name\":\"Subsume boolean combinations of atomic propositions in automata construction\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true,\"category\":\"Automaton\",\"x-precise-category\":\"automaton-category\"},{\"id\":\"automaton-det-neg\",\"name\":\"Use negated formula for deterministic models\",\"is-global\":true,\"type\":[\"never\",\"better\",\"always\"],\"x-precise-type\":\"<never|better|always>\",\"default-value\":\"better\",\"category\":\"Automaton\",\"x-precise-category\":\"automaton-category\"},{\"id\":\"automata-replace-ne\",\"name\":\"Replace \\\"a != b\\\" by \\\"!(a == b)\\\"\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true,\"category\":\"Automaton\",\"x-precise-category\":\"automaton-category\"},{\"id\":\"jani-fix-deadlocks\",\"name\":\"Allow and automatically fix deadlocks for JANI models\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true,\"category\":\"JANI model\",\"x-precise-category\":\"jani-model-category\"},{\"id\":\"jani-action-bits\",\"name\":\"Number of DD variables to reserve for symbolic JANI models\",\"is-global\":true,\"type\":\"string\",\"x-precise-type\":\"<integer>\",\"default-value\":\"20\",\"category\":\"JANI model\",\"x-precise-category\":\"jani-model-category\"},{\"id\":\"jani-explorer-initial-enumerator\",\"name\":\"Initial states enumerator\",\"is-global\":true,\"type\":[\"dd\",\"brute-force\"],\"x-precise-type\":\"<dd|brute-force>\",\"default-value\":\"dd\",\"category\":\"JANI model\",\"x-precise-category\":\"jani-model-category\"},{\"id\":\"jani-ctmc-allow-multi-transition\",\"name\":\"Allow multi transitions for CTMC JANI model\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true},{\"id\":\"prism-flatten\",\"name\":\"Flatten model before analysis\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true},{\"id\":\"prism-converter-reward-method\",\"name\":\"Reward transformation method\",\"is-global\":true,\"type\":[\"integrate\",\"external\",\"none\"],\"x-precise-type\":\"<integrate|external|none>\",\"default-value\":\"integrate\"},{\"id\":\"prism-converter-system-method\",\"name\":\"System type used\",\"is-global\":true,\"type\":[\"synchronisation-vectors\",\"recursive\"],\"x-precise-type\":\"<synchronisation-vectors|recursive>\",\"default-value\":\"synchronisation-vectors\"},{\"id\":\"dd-cudd-subengine\",\"name\":\"CUDD subengine\",\"is-global\":true,\"type\":[\"bdd\",\"mtbdd\"],\"x-precise-type\":\"<bdd|mtbdd>\",\"default-value\":\"mtbdd\",\"category\":\"CUDD\",\"x-precise-category\":\"dd-cudd-category\"},{\"id\":\"dd-cudd-init-cache-size\",\"name\":\"Initial cache size off CUDD\",\"is-global\":true,\"type\":\"int\",\"x-precise-type\":\"<integer>\",\"default-value\":262144,\"category\":\"CUDD\",\"x-precise-category\":\"dd-cudd-category\"},{\"id\":\"dd-cudd-max-memory\",\"name\":\"Max memory parameter of CUDD\",\"is-global\":true,\"type\":\"string\",\"x-precise-type\":\"<long>\",\"default-value\":\"34359738368\",\"category\":\"CUDD\",\"x-precise-category\":\"dd-cudd-category\"},{\"id\":\"dd-cudd-unique-slots\",\"name\":\"Unique slots parameter of CUDD\",\"is-global\":true,\"type\":\"int\",\"x-precise-type\":\"<integer>\",\"default-value\":256,\"category\":\"CUDD\",\"x-precise-category\":\"dd-cudd-category\"},{\"id\":\"dd-cudd-max-cache-hard\",\"name\":\"Hard maximum of cache size of CUDD (0 for automatic)\",\"is-global\":true,\"type\":\"string\",\"x-precise-type\":\"default|<non-neg-integer>\",\"default-value\":\"default\",\"category\":\"CUDD\",\"x-precise-category\":\"dd-cudd-category\"},{\"id\":\"dd-cudd-min-hit\",\"name\":\"Minimal cache hit percent before resizing for CUDD\",\"is-global\":true,\"type\":\"string\",\"x-precise-type\":\"default|<non-neg-integer>\",\"default-value\":\"default\",\"category\":\"CUDD\",\"x-precise-category\":\"dd-cudd-category\"},{\"id\":\"dd-cudd-garbage-collect\",\"name\":\"Enable garbage collection for CUDD\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true,\"category\":\"CUDD\",\"x-precise-category\":\"dd-cudd-category\"},{\"id\":\"dd-cudd-loose-up-to\",\"name\":\"CUDD loose up to parameter (0 for automatic)\",\"is-global\":true,\"type\":\"string\",\"x-precise-type\":\"default|<non-neg-integer>\",\"default-value\":\"default\",\"category\":\"CUDD\",\"x-precise-category\":\"dd-cudd-category\"},{\"id\":\"dd-cudd-reorder-heuristic\",\"name\":\"CUDD reoder heuristic\",\"is-global\":true,\"type\":[\"cudd-reorder-same\",\"cudd-reorder-none\",\"cudd-reorder-random\",\"cudd-reorder-random-pivot\",\"cudd-reorder-sift\",\"cudd-reorder-sift-converge\",\"cudd-reorder-symm-sift\",\"cudd-reorder-symm-sift-conv\",\"cudd-reorder-window2\",\"cudd-reorder-window3\",\"cudd-reorder-window4\",\"cudd-reorder-window2-conv\",\"cudd-reorder-window3-conv\",\"cudd-reorder-window4-conv\",\"cudd-reorder-group-sift\",\"cudd-reorder-group-sift-conv\",\"cudd-reorder-annealing\",\"cudd-reorder-genetic\",\"cudd-reorder-linear\",\"cudd-reorder-linear-converge\",\"cudd-reorder-lazy-sift\",\"cudd-reorder-exact\"],\"x-precise-type\":\"<cudd-reorder-same|cudd-reorder-none|cudd-reorder-random|cudd-reorder-random-pivot|cudd-reorder-sift|cudd-reorder-sift-converge|cudd-reorder-symm-sift|cudd-reorder-symm-sift-conv|cudd-reorder-window2|cudd-reorder-window3|cudd-reorder-window4|cudd-reorder-window2-conv|cudd-reorder-window3-conv|cudd-reorder-window4-conv|cudd-reorder-group-sift|cudd-reorder-group-sift-conv|cudd-reorder-annealing|cudd-reorder-genetic|cudd-reorder-linear|cudd-reorder-linear-converge|cudd-reorder-lazy-sift|cudd-reorder-exact>\",\"default-value\":\"cudd-reorder-same\",\"category\":\"CUDD\",\"x-precise-category\":\"dd-cudd-category\"},{\"id\":\"dd-cudd-mtbdd-init-cache-size\",\"name\":\"Initial cache size off CUDD for MTBDDs\",\"is-global\":true,\"type\":\"int\",\"x-precise-type\":\"<integer>\",\"default-value\":0,\"category\":\"CUDD MTBDD\",\"x-precise-category\":\"dd-cudd-mtbdd-category\"},{\"id\":\"dd-cudd-mtbdd-max-memory\",\"name\":\"Max memory parameter of CUDD for MTBDDs\",\"is-global\":true,\"type\":\"string\",\"x-precise-type\":\"<long>\",\"default-value\":\"0\",\"category\":\"CUDD MTBDD\",\"x-precise-category\":\"dd-cudd-mtbdd-category\"},{\"id\":\"dd-cudd-mtbdd-unique-slots\",\"name\":\"Unique slots parameter of CUDD for MTBDDs\",\"is-global\":true,\"type\":\"int\",\"x-precise-type\":\"<integer>\",\"default-value\":256,\"category\":\"CUDD MTBDD\",\"x-precise-category\":\"dd-cudd-mtbdd-category\"},{\"id\":\"dd-cudd-mtbdd-max-cache-hard\",\"name\":\"CUDD for MTBDDs hard cache limit\",\"is-global\":true,\"type\":\"int\",\"x-precise-type\":\"<integer>\",\"default-value\":0,\"category\":\"CUDD MTBDD\",\"x-precise-category\":\"dd-cudd-mtbdd-category\"},{\"id\":\"dd-cudd-mtbdd-min-hit\",\"name\":\"Minimal cache hit percent before resizing for CUDD for MTBDDs\",\"is-global\":true,\"type\":\"int\",\"x-precise-type\":\"<integer>\",\"default-value\":30,\"category\":\"CUDD MTBDD\",\"x-precise-category\":\"dd-cudd-mtbdd-category\"},{\"id\":\"dd-cudd-mtbdd-garbage-collect\",\"name\":\"Enable garbage collection for CUDD for MTBDDs\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true,\"category\":\"CUDD MTBDD\",\"x-precise-category\":\"dd-cudd-mtbdd-category\"},{\"id\":\"dd-cudd-mtbdd-loose-up-to\",\"name\":\"CUDD for MTBDDs loose up to parameter (0 for automatic)\",\"is-global\":true,\"type\":\"int\",\"x-precise-type\":\"<integer>\",\"default-value\":0,\"category\":\"CUDD MTBDD\",\"x-precise-category\":\"dd-cudd-mtbdd-category\"},{\"id\":\"ltl-lazy-incremental\",\"name\":\"Use incremental approach to decide LTL property\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":false,\"category\":\"Lazy LTL solver\",\"x-precise-category\":\"ltl-lazy-category\"},{\"id\":\"ltl-lazy-use-subset\",\"name\":\"Use subset automaton construction for determinisation\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true,\"category\":\"Lazy LTL solver\",\"x-precise-category\":\"ltl-lazy-category\"},{\"id\":\"ltl-lazy-use-breakpoint\",\"name\":\"Use breakpoint automaton construction for determinisation\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true,\"category\":\"Lazy LTL solver\",\"x-precise-category\":\"ltl-lazy-category\"},{\"id\":\"ltl-lazy-use-breakpoint-singletons\",\"name\":\"Use breakpoint automaton singletons construction for determinisation\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true,\"category\":\"Lazy LTL solver\",\"x-precise-category\":\"ltl-lazy-category\"},{\"id\":\"ltl-lazy-use-rabin\",\"name\":\"Use Rabin automaton construction for determinisation\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true,\"category\":\"Lazy LTL solver\",\"x-precise-category\":\"ltl-lazy-category\"},{\"id\":\"ltl-lazy-scc-skip-transient\",\"name\":\"Skip transient states during SCC decomposition\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true,\"category\":\"Lazy LTL solver\",\"x-precise-category\":\"ltl-lazy-category\"},{\"id\":\"ltl-lazy-remove-decided\",\"name\":\"During decision procedure, remove states already known to be one-states\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true,\"category\":\"Lazy LTL solver\",\"x-precise-category\":\"ltl-lazy-category\"},{\"id\":\"ltl-lazy-stop-if-init-decided\",\"name\":\"Stop computations once values for initial states known\",\"is-global\":true,\"type\":\"bool\",\"x-precise-type\":\"<boolean>\",\"default-value\":true,\"category\":\"Lazy LTL solver\",\"x-precise-category\":\"ltl-lazy-category\"},{\"id\":\"automaton-expression2type\",\"name\":\"Type of automaton to convert expressions to\",\"is-global\":true,\"type\":[\"schewe-rabin\",\"schewe-parity\",\"breakpoint\",\"subset\"],\"x-precise-type\":\"<schewe-rabin|schewe-parity|breakpoint|subset>\",\"default-value\":\"schewe-rabin\"},{\"id\":\"lump-output-type\",\"name\":\"Lump output type\",\"is-global\":true,\"type\":[\"quotient\",\"statistics\"],\"x-precise-type\":\"<quotient|statistics>\",\"default-value\":\"statistics\"},{\"id\":\"graphsolver-iterative-method\",\"name\":\"Iteration method\",\"is-global\":true,\"type\":[\"jacobi\",\"gauss-seidel\"],\"x-precise-type\":\"<jacobi|gauss-seidel>\",\"default-value\":\"gauss-seidel\",\"category\":\"Iterative graph solver\",\"x-precise-category\":\"graphsolver-iterative-category\"},{\"id\":\"graphsolver-iterative-stop-criterion\",\"name\":\"Criterion for stopping iterative methods\",\"is-global\":true,\"type\":[\"absolute\",\"relative\"],\"x-precise-type\":\"<absolute|relative>\",\"default-value\":\"absolute\",\"category\":\"Iterative graph solver\",\"x-precise-category\":\"graphsolver-iterative-category\"},{\"id\":\"graphsolver-iterative-tolerance\",\"name\":\"Tolerance for stopping iterative methods\",\"is-global\":true,\"type\":\"string\",\"x-precise-type\":\"<nonnegative-real>\",\"default-value\":\"1.0E-10\",\"category\":\"Iterative graph solver\",\"x-precise-category\":\"graphsolver-iterative-category\"},{\"id\":\"jani-interaction-analysis-server-type\",\"name\":\"Server type to use for running analyses\",\"is-global\":true,\"type\":[\"same-process\",\"local\"],\"x-precise-type\":\"<same-process|local>\",\"default-value\":\"same-process\",\"category\":\"JANI interaction\",\"x-precise-category\":\"jani-interaction-category\"},{\"id\":\"jani-interaction-jdbc-driver-jar\",\"name\":\"JAR file containing JDBC driver (if not loaded via classpath)\",\"is-global\":false,\"type\":\"string\",\"x-precise-type\":\"<string>\",\"default-value\":null,\"category\":\"JANI interaction JDBC\",\"x-precise-category\":\"jani-interaction-jdbc-category\"},{\"id\":\"jani-interaction-jdbc-driver-class\",\"name\":\"Class name of JDBC driver (if not loaded via classpath)\",\"is-global\":false,\"type\":\"string\",\"x-precise-type\":\"<string>\",\"default-value\":\"org.sqlite.JDBC\",\"category\":\"JANI interaction JDBC\",\"x-precise-category\":\"jani-interaction-jdbc-category\"},{\"id\":\"jani-interaction-jdbc-url\",\"name\":\"URL to connect to database\",\"is-global\":false,\"type\":\"string\",\"x-precise-type\":\"<string>\",\"default-value\":\"jdbc:sqlite:jani-default.db\",\"category\":\"JANI interaction JDBC\",\"x-precise-category\":\"jani-interaction-jdbc-category\"},{\"id\":\"jani-interaction-jdbc-username\",\"name\":\"User name to connect to database\",\"is-global\":false,\"type\":\"string\",\"x-precise-type\":\"<string>\",\"default-value\":\"user\",\"category\":\"JANI interaction JDBC\",\"x-precise-category\":\"jani-interaction-jdbc-category\"},{\"id\":\"jani-interaction-jdbc-password\",\"name\":\"Password to connect to database\",\"is-global\":false,\"type\":\"string\",\"x-precise-type\":\"<string>\",\"default-value\":\"password\",\"category\":\"JANI interaction JDBC\",\"x-precise-category\":\"jani-interaction-jdbc-category\"},{\"id\":\"jani-interaction-jdbc-dbtype-primary-key-autoincrement\",\"name\":\"DB type to use for auto-incrementing primary key\",\"is-global\":false,\"type\":\"string\",\"x-precise-type\":\"<string>\",\"default-value\":\"INTEGER PRIMARY KEY AUTOINCREMENT\",\"category\":\"JANI interaction JDBC\",\"x-precise-category\":\"jani-interaction-jdbc-category\"}],\"roles\":[\"analyse\",\"transform\"]}";
        JsonObject value = UtilJSON.toObject(UtilJSON.read(string));
        JsonArray parameters = UtilJSON.getArray(value, "parameters");
        JsonArray preciseCategories = UtilJSON.getArrayOrNull(value, "x-precise-categories");
        CommandLineOptions options = new CommandLineOptions();
        options.parsePreciseCategories(preciseCategories);
        options.parseOptions(parameters);
        System.out.println(UsagePrinterJANI.getUsage(options));
    }
}
